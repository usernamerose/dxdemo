webpackJsonp([6],{"1JkG":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={components:{LoginHeader:a("cIVk").a},data:function(){return{userId:null,telnum:this.$route.query.telnum,formLabelWidth:"120px",formUserFeedBack:{desc:"",feedbackMsg:""},dialogVisibleFeedBack:!1,tableData:[],options:[{value:"2018",label:"2018年"},{value:"2019",label:"2019年"},{value:"2020",label:"2020年"}],value:"2020",dialogFeedBackData:null}},mounted:function(){this.getSalaryData(this.value,this.telnum)},methods:{deleteData:function(e){var t=this,a=e.id;t.$api.get("http://119.3.63.239:8080/wage/delete/"+a,null,function(e){t.getSalaryData(t.value,t.telnum)})},addData:function(e,t){var a={id:null,name:this.$route.query.name,userId:this.userId,year:this.value,month:null,baseWage:null,otherWage:null,deduction:null,feedBackInfo:"",approvalInfo:"",provide:!1,edit:!0,monthEdit:!0};this.tableData.splice(0,0,a)},getSalaryData:function(e,t){var a=this,l=this;l.$api.get("http://119.3.63.239:8080/wage/findByUserIdAndYear/"+e+"/"+t,null,function(e){e.data.length<1||(e.data.forEach(function(e){e.edit=!1,e.name=a.$route.query.name,e.monthEdit=!1}),l.tableData=e.data,l.userId=e.data[0].userId)})},payroll:function(e){var t=this,a=e;a.provide=!0,t.$api.post("http://119.3.63.239:8080/wage/update",a,function(e){t.getSalaryData(t.value,t.telnum)})},editSalary:function(e,t){e.edit=!0},confirmAdd:function(e,t){var a=this,l=e;l.userId=this.$route.query.userId,console.log(a.userId),console.log(l),a.$api.post("http://119.3.63.239:8080/wage/update",l,function(e){a.getSalaryData(a.value,a.telnum)}),e.edit=!1},approve:function(e,t){this.formUserFeedBack.feedbackMsg=e.feedBackInfo,this.formUserFeedBack.desc=e.approvalInfo,this.dialogFeedBackData=e,this.dialogVisibleFeedBack=!0},dialogFeedBack:function(){var e=this,t=e.dialogFeedBackData;t.approvalInfo=e.formUserFeedBack.desc,e.$api.post("http://119.3.63.239:8080/wage/update",t,function(t){e.getSalaryData(e.value,e.telnum)}),this.dialogVisibleFeedBack=!1},onSelectedDate:function(e){this.value=e,this.getSalaryData(this.value,this.telnum)}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-center"},[a("login-header"),e._v(" "),a("div",{staticStyle:{padding:"20px 0"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/adminCenter"}}},[e._v("用户列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户工资信息")])],1)],1),e._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",color:"#303133","text-align":"left",padding:"10px 0"}},[e._v("用户工资信息")]),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",display:"flex","justify-content":"space-between"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData()}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger"}},[a("a",{staticStyle:{color:"#fff","text-decoration":"none",cursor:"pointer"},attrs:{href:"http://119.3.63.239:8080/wage/export/"+e.userId+"/"+e.value,target:"_blank"}},[e._v("导出")])])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left","padding-bottom":"20px"}},[a("span",[e._v("选择年份")]),e._v(" "),a("span",[a("el-select",{attrs:{placeholder:"请选择年份"},on:{change:function(t){return e.onSelectedDate(e.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])]),e._v(" "),a("el-table",{staticStyle:{width:"100%",padding:"0 20px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"month",label:"月份",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),t.row.monthEdit?a("el-input",{staticStyle:{width:"60px"},attrs:{placeholder:"月份"},model:{value:t.row.month,callback:function(a){e.$set(t.row,"month",a)},expression:"scope.row.month"}}):a("span",[e._v(e._s(t.row.month))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"baseWage",label:"基本工资",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{attrs:{placeholder:"基本工资"},model:{value:t.row.baseWage,callback:function(a){e.$set(t.row,"baseWage",a)},expression:"scope.row.baseWage"}}):a("span",[e._v(e._s(t.row.baseWage))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"otherWage",label:"绩效工资",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{attrs:{placeholder:"绩效工资"},model:{value:t.row.otherWage,callback:function(a){e.$set(t.row,"otherWage",a)},expression:"scope.row.otherWage"}}):a("span",[e._v(e._s(t.row.otherWage))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deduction",label:"个税",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{attrs:{placeholder:"请输入个税"},model:{value:t.row.deduction,callback:function(a){e.$set(t.row,"deduction",a)},expression:"scope.row.deduction"}}):a("span",[e._v(e._s(t.row.deduction))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"feedBackInfo",label:"用户反馈信息",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"approvalInfo",label:"审批结果",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"provide",label:"是否已发放",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.provide?a("span",[e._v("已发放")]):a("span",[e._v("未发放")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.confirmAdd(t.row)}}},[e._v("完成")]):a("div",[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteData(t.row,t.$index)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.payroll(t.row)}}},[e._v("发放工资")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editSalary(t.row)}}},[e._v("编辑工资")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.approve(t.row,t.$index)}}},[e._v("审批")])],1)]}}])})],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"审批",visible:e.dialogVisibleFeedBack,width:"50%"},on:{"update:visible":function(t){e.dialogVisibleFeedBack=t}}},[a("el-form",{attrs:{model:e.formUserFeedBack}},[a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"问题","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.formUserFeedBack.feedbackMsg))])]),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"审批意见","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{"wpadding-left":"20px",width:"540px"},attrs:{type:"textarea",rows:7,autocomplete:"off"},model:{value:e.formUserFeedBack.desc,callback:function(t){e.$set(e.formUserFeedBack,"desc",t)},expression:"formUserFeedBack.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleFeedBack=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogFeedBack()}}},[e._v("同意")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(e){a("DDv+")},null,null);t.default=n.exports},"DDv+":function(e,t){}});
//# sourceMappingURL=6.59c817b58048a5754d26.js.map