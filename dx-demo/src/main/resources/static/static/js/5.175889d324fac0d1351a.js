webpackJsonp([5],{kRo4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{volidTipMsg:"关闭电信手机号校验",switchValue:!0,loginRole:"用户登录",isShowtimeCount:!1,timeCount:10,getVerifCodeDisable:!0,ruleForm:{phone:"",pass:"",checkPass:"",VerificationCode:""},checkedRegisteredStatus:!1,checkVerificationCodeStatus:"",reg:/^1{1}\d{10}$/,rules:{phone:[{validator:this.validatePhone,trigger:"blur"}],VerificationCode:[{validator:this.VerificationCode,trigger:"blur"}],pass:[{validator:this.validatePass,trigger:"blur"}],checkPass:[{validator:this.validatePass2,trigger:"blur"}]}}},methods:{validatePhone:function(e,t,i){""===t?(i(new Error("手机号不能为空")),this.getVerifCodeDisable=!0):this.reg.test(t)?(this.checkedRegistered(),this.checkedRegisteredStatus&&i(new Error("该手机号已注册，请直接登录！")),""!==this.ruleForm.VerificationCode&&this.$refs.ruleForm.validateField("VerificationCode"),i(),this.getVerifCodeDisable=!1):(i(new Error("请输入电信手机号")),this.getVerifCodeDisable=!0)},VerificationCode:function(e,t,i){""===t&&i(new Error("请输入验证码")),/^\d{6}$/.test(t)?(this.checkVerificationCode(),""!==this.checkVerificationCodeStatus&&"success"!==this.checkVerificationCodeStatus&&i(new Error("验证码有误，请重新输入")),""!==this.ruleForm.pass&&this.$refs.ruleForm.validateField("pass"),i()):i(new Error("验证码格式有误"))},validatePass:function(e,t,i){""===t?i(new Error("请输入密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),i())},validatePass2:function(e,t,i){""===t?i(new Error("请再次输入密码")):t!==this.ruleForm.pass?i(new Error("两次输入密码不一致!")):i()},swithChange:function(e){e?(this.volidTipMsg="关闭电信手机号校验",this.reg=/^1{1}\d{10}$/):(this.volidTipMsg="开启电信手机号校验",this.reg=/^1(3[3]|5[3]|8[09])\d{8}$/)},submitForm:function(e){var t=this;console.log(e),t.$refs[e].validate(function(e){if(e){var i={telnum:t.ruleForm.phone,password:t.ruleForm.pass};t.$api.post("http://119.3.63.239:8080/user/updateUser",i,function(e){t.$router.push("./login")})}})},userLogin:function(){this.$router.push("./login")},checkedRegistered:function(){var e=this,t=e.ruleForm.phone;e.$api.get("http://119.3.63.239:8080/user/isRegistered/"+t,null,function(t){console.log(t.data.result),t.data.result?(e.$message("手机号已注册，请重新输入"),e.getVerifCodeDisable=!0):e.getVerifCodeDisable=!1,e.checkedRegisteredStatus=t.data.result})},getVerificationCode:function(){var e,t=(e=this).ruleForm.phone;e.$api.get("http://119.3.63.239:8080/user/sendTelCode/"+t,null,function(e){console.log(e.data.result)}),(e=this).isShowtimeCount=!0,e.getVerifCodeDisable=!0;var i=window.setInterval(function(){e.timeCount--,e.timeCount<0&&(clearInterval(i),e.timeCount=10,e.isShowtimeCount=!1,e.getVerifCodeDisable=!1)},1e3)},checkVerificationCode:function(){var e=this,t=e.ruleForm.phone,i=e.ruleForm.VerificationCode;e.$api.get("http://119.3.63.239:8080/user/checkTelCode/"+t+"/"+i,null,function(t){console.log(t.data.result),e.checkVerificationCodeStatus=t.data.result,"success"!==e.checkVerificationCodeStatus&&e.$message(e.checkVerificationCodeStatus)})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{width:"1200px",margin:"0 auto","margin-top":"100px",padding:"20px 0"},attrs:{clas:"login-wrap"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"0 100px"}},[i("div",{staticClass:"left"}),e._v(" "),i("div",{staticClass:"login-box"},[e._m(0),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"left","padding-bottom":"20px"}},[i("span",[i("el-form-item",{attrs:{label:"",prop:"VerificationCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入6位验证码"},model:{value:e.ruleForm.VerificationCode,callback:function(t){e.$set(e.ruleForm,"VerificationCode",t)},expression:"ruleForm.VerificationCode"}}),e._v(" "),i("el-link",{attrs:{type:"warning",disabled:e.getVerifCodeDisable},on:{click:function(t){return e.getVerificationCode()}}},[e._v("点击获取验证码")]),e._v(" "),e.isShowtimeCount?i("span",{staticStyle:{"font-size":"12px",position:"relative",top:"2px"}},[e._v(e._s(e.timeCount)+"s后重试")]):e._e()],1)],1)]),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"pass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1),e._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"0",left:"20px","font-size":"14px",color:"#E6A23C",cursor:"pointer","font-family":"'Helvetica Neue'"}},[i("el-switch",{attrs:{"active-color":"#13ce66",change:e.swithChange(e.switchValue),"inactive-color":"#ff4949"},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}}),e._v(" "),i("span",[e._v(e._s(e.volidTipMsg))])],1),e._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"0",right:"0","font-size":"14px",color:"#E6A23C",cursor:"pointer","font-family":"'Helvetica Neue'"}},[i("span",{on:{click:function(t){return e.userLogin()}}},[e._v(e._s(e.loginRole))])])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-title"},[t("h1",[this._v("民工工资自主查询平台")])])}]};var s=i("VU/8")(o,r,!1,function(e){i("nKIJ")},null,null);t.default=s.exports},nKIJ:function(e,t){}});
//# sourceMappingURL=5.175889d324fac0d1351a.js.map